!function(t){function e(a){if(r[a])return r[a].exports;var n=r[a]={exports:{},id:a,loaded:!1};return t[a].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){r(24),t.exports=r(3)},function(t,e){var r={};r.EPSILON=1e-6,r.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,r.RANDOM=Math.random,r.ENABLE_SIMD=!1,r.SIMD_AVAILABLE=r.ARRAY_TYPE===Float32Array&&"SIMD"in this,r.USE_SIMD=r.ENABLE_SIMD&&r.SIMD_AVAILABLE,r.setMatrixArrayType=function(t){r.ARRAY_TYPE=t};var a=Math.PI/180;r.toRadian=function(t){return t*a},r.equals=function(t,e){return Math.abs(t-e)<=r.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},t.exports=r},function(t,e){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),n=function(){function t(e,a,n,o,i){r(this,t),console.log("in LoadPool class"),this.util=a,this.webgl=o,this.glMatrix=n,this.MAX_CACHE=i,this.loadCache=new Array(i),this.waitCache=[],window.loadCache=this.loadCache,window.waitCache=this.waitCache,this.waitCt=0,this.loadCt=0,this.ready=!1}return a(t,[{key:"createWaitObj",value:function(t,e,r){console.log("creating wait object..."+t),this.loadCt++,this.waitCache.push({source:t,attach:e,callback:r})}},{key:"update",value:function(t){console.log("in loadTexture.update()");var e=this.waitCache,r=e.length;if(r<1)return console.log("all objects loaded, nothing to do..."),void(this.ready=!0);this.ready=!1;var a=0,n=this.loadCache,o=n.length;console.log("lLen:"+o),console.log("wLen:"+r);var i=e.shift();if(console.log("have a waitObj waiting..."+i.source),t&&t.busy===!1)console.log("re-using a loader object"),t.image.src=i.source;else for(a;a<o;a++)if(!n[a]){console.log("creating a new loader object"),n[a]=this.createLoadObj(i);break}}},{key:"load",value:function(t,e,r,a){this.createWaitObj(t,e,r),this.update()}}]),t}();e["default"]=n},function(t,e,r){(function(t){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.world=e.webvr=e.prim=e.loadVideo=e.loadAudio=e.loadTexture=e.loadModel=e.webgl=e.util=void 0;var n=r(14),o=a(n),i=r(15),u=a(i),l=r(2),s=(a(l),r(10)),c=a(s),f=r(9),h=a(f),M=r(8),d=a(M),m=r(11),x=a(m),v=r(16),S=a(v),b=r(13),g=a(b),I=r(12),D=a(I),F=r(17),p=a(F);console.log("in es6");var E=(t.env.WEBPACK_ENV,r(18));E?console.log("loaded gl-matrix"):console.error("gl-matrix could'nt be loaded...");var y=new o["default"],w=null;e.webgl=w=new u["default"]((!1),E,y);var R=new S["default"]((!1),y,E,w),A=new h["default"]((!0),y,E,w),T=new c["default"]((!0),y,E,w),_=new d["default"]((!0),y,E,w),P=new x["default"]((!0),y,E,w),O=new g["default"]((!0),y,E,w),L=new D["default"]((!0),y,E,w,A,T,_,P),z=new p["default"](w,L,O);e.util=y,e.webgl=w,e.loadModel=A,e.loadTexture=T,e.loadAudio=_,e.loadVideo=P,e.prim=L,e.webvr=R,e.world=z}).call(e,r(7))},function(t,e,r){var a=r(1),n={};n.create=function(){var t=new a.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},n.clone=function(t){var e=new a.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},n.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},n.fromValues=function(t,e,r,n,o,i,u,l,s){var c=new a.ARRAY_TYPE(9);return c[0]=t,c[1]=e,c[2]=r,c[3]=n,c[4]=o,c[5]=i,c[6]=u,c[7]=l,c[8]=s,c},n.set=function(t,e,r,a,n,o,i,u,l,s){return t[0]=e,t[1]=r,t[2]=a,t[3]=n,t[4]=o,t[5]=i,t[6]=u,t[7]=l,t[8]=s,t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.transpose=function(t,e){if(t===e){var r=e[1],a=e[2],n=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=a,t[7]=n}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},n.invert=function(t,e){var r=e[0],a=e[1],n=e[2],o=e[3],i=e[4],u=e[5],l=e[6],s=e[7],c=e[8],f=c*i-u*s,h=-c*o+u*l,M=s*o-i*l,d=r*f+a*h+n*M;return d?(d=1/d,t[0]=f*d,t[1]=(-c*a+n*s)*d,t[2]=(u*a-n*i)*d,t[3]=h*d,t[4]=(c*r-n*l)*d,t[5]=(-u*r+n*o)*d,t[6]=M*d,t[7]=(-s*r+a*l)*d,t[8]=(i*r-a*o)*d,t):null},n.adjoint=function(t,e){var r=e[0],a=e[1],n=e[2],o=e[3],i=e[4],u=e[5],l=e[6],s=e[7],c=e[8];return t[0]=i*c-u*s,t[1]=n*s-a*c,t[2]=a*u-n*i,t[3]=u*l-o*c,t[4]=r*c-n*l,t[5]=n*o-r*u,t[6]=o*s-i*l,t[7]=a*l-r*s,t[8]=r*i-a*o,t},n.determinant=function(t){var e=t[0],r=t[1],a=t[2],n=t[3],o=t[4],i=t[5],u=t[6],l=t[7],s=t[8];return e*(s*o-i*l)+r*(-s*n+i*u)+a*(l*n-o*u)},n.multiply=function(t,e,r){var a=e[0],n=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=e[6],c=e[7],f=e[8],h=r[0],M=r[1],d=r[2],m=r[3],x=r[4],v=r[5],S=r[6],b=r[7],g=r[8];return t[0]=h*a+M*i+d*s,t[1]=h*n+M*u+d*c,t[2]=h*o+M*l+d*f,t[3]=m*a+x*i+v*s,t[4]=m*n+x*u+v*c,t[5]=m*o+x*l+v*f,t[6]=S*a+b*i+g*s,t[7]=S*n+b*u+g*c,t[8]=S*o+b*l+g*f,t},n.mul=n.multiply,n.translate=function(t,e,r){var a=e[0],n=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=e[6],c=e[7],f=e[8],h=r[0],M=r[1];return t[0]=a,t[1]=n,t[2]=o,t[3]=i,t[4]=u,t[5]=l,t[6]=h*a+M*i+s,t[7]=h*n+M*u+c,t[8]=h*o+M*l+f,t},n.rotate=function(t,e,r){var a=e[0],n=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=e[6],c=e[7],f=e[8],h=Math.sin(r),M=Math.cos(r);return t[0]=M*a+h*i,t[1]=M*n+h*u,t[2]=M*o+h*l,t[3]=M*i-h*a,t[4]=M*u-h*n,t[5]=M*l-h*o,t[6]=s,t[7]=c,t[8]=f,t},n.scale=function(t,e,r){var a=r[0],n=r[1];return t[0]=a*e[0],t[1]=a*e[1],t[2]=a*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},n.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},n.fromRotation=function(t,e){var r=Math.sin(e),a=Math.cos(e);return t[0]=a,t[1]=r,t[2]=0,t[3]=-r,t[4]=a,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},n.fromQuat=function(t,e){var r=e[0],a=e[1],n=e[2],o=e[3],i=r+r,u=a+a,l=n+n,s=r*i,c=a*i,f=a*u,h=n*i,M=n*u,d=n*l,m=o*i,x=o*u,v=o*l;return t[0]=1-f-d,t[3]=c-v,t[6]=h+x,t[1]=c+v,t[4]=1-s-d,t[7]=M-m,t[2]=h-x,t[5]=M+m,t[8]=1-s-f,t},n.normalFromMat4=function(t,e){var r=e[0],a=e[1],n=e[2],o=e[3],i=e[4],u=e[5],l=e[6],s=e[7],c=e[8],f=e[9],h=e[10],M=e[11],d=e[12],m=e[13],x=e[14],v=e[15],S=r*u-a*i,b=r*l-n*i,g=r*s-o*i,I=a*l-n*u,D=a*s-o*u,F=n*s-o*l,p=c*m-f*d,E=c*x-h*d,y=c*v-M*d,w=f*x-h*m,R=f*v-M*m,A=h*v-M*x,T=S*A-b*R+g*w+I*y-D*E+F*p;return T?(T=1/T,t[0]=(u*A-l*R+s*w)*T,t[1]=(l*y-i*A-s*E)*T,t[2]=(i*R-u*y+s*p)*T,t[3]=(n*R-a*A-o*w)*T,t[4]=(r*A-n*y+o*E)*T,t[5]=(a*y-r*R-o*p)*T,t[6]=(m*F-x*D+v*I)*T,t[7]=(x*g-d*F-v*b)*T,t[8]=(d*D-m*g+v*S)*T,t):null},n.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},n.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t},n.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t},n.sub=n.subtract,n.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t},n.multiplyScalarAndAdd=function(t,e,r,a){return t[0]=e[0]+r[0]*a,t[1]=e[1]+r[1]*a,t[2]=e[2]+r[2]*a,t[3]=e[3]+r[3]*a,t[4]=e[4]+r[4]*a,t[5]=e[5]+r[5]*a,t[6]=e[6]+r[6]*a,t[7]=e[7]+r[7]*a,t[8]=e[8]+r[8]*a,t},n.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},n.equals=function(t,e){var r=t[0],n=t[1],o=t[2],i=t[3],u=t[4],l=t[5],s=t[6],c=t[7],f=t[8],h=e[0],M=e[1],d=e[2],m=e[3],x=e[4],v=e[5],S=t[6],b=e[7],g=e[8];return Math.abs(r-h)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(n-M)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(M))&&Math.abs(o-d)<=a.EPSILON*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(i-m)<=a.EPSILON*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(u-x)<=a.EPSILON*Math.max(1,Math.abs(u),Math.abs(x))&&Math.abs(l-v)<=a.EPSILON*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(s-S)<=a.EPSILON*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(c-b)<=a.EPSILON*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(f-g)<=a.EPSILON*Math.max(1,Math.abs(f),Math.abs(g))},t.exports=n},function(t,e,r){var a=r(1),n={};n.create=function(){var t=new a.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},n.clone=function(t){var e=new a.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},n.fromValues=function(t,e,r){var n=new a.ARRAY_TYPE(3);return n[0]=t,n[1]=e,n[2]=r,n},n.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},n.set=function(t,e,r,a){return t[0]=e,t[1]=r,t[2]=a,t},n.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t},n.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t},n.sub=n.subtract,n.multiply=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t},n.mul=n.multiply,n.divide=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t},n.div=n.divide,n.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},n.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},n.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t},n.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t},n.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},n.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t},n.scaleAndAdd=function(t,e,r,a){return t[0]=e[0]+r[0]*a,t[1]=e[1]+r[1]*a,t[2]=e[2]+r[2]*a,t},n.distance=function(t,e){var r=e[0]-t[0],a=e[1]-t[1],n=e[2]-t[2];return Math.sqrt(r*r+a*a+n*n)},n.dist=n.distance,n.squaredDistance=function(t,e){var r=e[0]-t[0],a=e[1]-t[1],n=e[2]-t[2];return r*r+a*a+n*n},n.sqrDist=n.squaredDistance,n.length=function(t){var e=t[0],r=t[1],a=t[2];return Math.sqrt(e*e+r*r+a*a)},n.len=n.length,n.squaredLength=function(t){var e=t[0],r=t[1],a=t[2];return e*e+r*r+a*a},n.sqrLen=n.squaredLength,n.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},n.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},n.normalize=function(t,e){var r=e[0],a=e[1],n=e[2],o=r*r+a*a+n*n;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t},n.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},n.cross=function(t,e,r){var a=e[0],n=e[1],o=e[2],i=r[0],u=r[1],l=r[2];return t[0]=n*l-o*u,t[1]=o*i-a*l,t[2]=a*u-n*i,t},n.lerp=function(t,e,r,a){var n=e[0],o=e[1],i=e[2];return t[0]=n+a*(r[0]-n),t[1]=o+a*(r[1]-o),t[2]=i+a*(r[2]-i),t},n.hermite=function(t,e,r,a,n,o){var i=o*o,u=i*(2*o-3)+1,l=i*(o-2)+o,s=i*(o-1),c=i*(3-2*o);return t[0]=e[0]*u+r[0]*l+a[0]*s+n[0]*c,t[1]=e[1]*u+r[1]*l+a[1]*s+n[1]*c,t[2]=e[2]*u+r[2]*l+a[2]*s+n[2]*c,t},n.bezier=function(t,e,r,a,n,o){var i=1-o,u=i*i,l=o*o,s=u*i,c=3*o*u,f=3*l*i,h=l*o;return t[0]=e[0]*s+r[0]*c+a[0]*f+n[0]*h,t[1]=e[1]*s+r[1]*c+a[1]*f+n[1]*h,t[2]=e[2]*s+r[2]*c+a[2]*f+n[2]*h,t},n.random=function(t,e){e=e||1;var r=2*a.RANDOM()*Math.PI,n=2*a.RANDOM()-1,o=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*o,t[1]=Math.sin(r)*o,t[2]=n*e,t},n.transformMat4=function(t,e,r){var a=e[0],n=e[1],o=e[2],i=r[3]*a+r[7]*n+r[11]*o+r[15];return i=i||1,t[0]=(r[0]*a+r[4]*n+r[8]*o+r[12])/i,t[1]=(r[1]*a+r[5]*n+r[9]*o+r[13])/i,t[2]=(r[2]*a+r[6]*n+r[10]*o+r[14])/i,t},n.transformMat3=function(t,e,r){var a=e[0],n=e[1],o=e[2];return t[0]=a*r[0]+n*r[3]+o*r[6],t[1]=a*r[1]+n*r[4]+o*r[7],t[2]=a*r[2]+n*r[5]+o*r[8],t},n.transformQuat=function(t,e,r){var a=e[0],n=e[1],o=e[2],i=r[0],u=r[1],l=r[2],s=r[3],c=s*a+u*o-l*n,f=s*n+l*a-i*o,h=s*o+i*n-u*a,M=-i*a-u*n-l*o;return t[0]=c*s+M*-i+f*-l-h*-u,t[1]=f*s+M*-u+h*-i-c*-l,t[2]=h*s+M*-l+c*-u-f*-i,t},n.rotateX=function(t,e,r,a){var n=[],o=[];return n[0]=e[0]-r[0],n[1]=e[1]-r[1],n[2]=e[2]-r[2],o[0]=n[0],o[1]=n[1]*Math.cos(a)-n[2]*Math.sin(a),o[2]=n[1]*Math.sin(a)+n[2]*Math.cos(a),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},n.rotateY=function(t,e,r,a){var n=[],o=[];return n[0]=e[0]-r[0],n[1]=e[1]-r[1],n[2]=e[2]-r[2],o[0]=n[2]*Math.sin(a)+n[0]*Math.cos(a),o[1]=n[1],o[2]=n[2]*Math.cos(a)-n[0]*Math.sin(a),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},n.rotateZ=function(t,e,r,a){var n=[],o=[];return n[0]=e[0]-r[0],n[1]=e[1]-r[1],n[2]=e[2]-r[2],o[0]=n[0]*Math.cos(a)-n[1]*Math.sin(a),o[1]=n[0]*Math.sin(a)+n[1]*Math.cos(a),o[2]=n[2],t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},n.forEach=function(){var t=n.create();return function(e,r,a,n,o,i){var u,l;for(r||(r=3),a||(a=0),l=n?Math.min(n*r+a,e.length):e.length,u=a;u<l;u+=r)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],o(t,t,i),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2];return e}}(),n.angle=function(t,e){var r=n.fromValues(t[0],t[1],t[2]),a=n.fromValues(e[0],e[1],e[2]);n.normalize(r,r),n.normalize(a,a);var o=n.dot(r,a);return o>1?0:Math.acos(o)},n.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},n.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},n.equals=function(t,e){var r=t[0],n=t[1],o=t[2],i=e[0],u=e[1],l=e[2];return Math.abs(r-i)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-u)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(o-l)<=a.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))},t.exports=n},function(t,e,r){var a=r(1),n={};n.create=function(){var t=new a.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},n.clone=function(t){var e=new a.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},n.fromValues=function(t,e,r,n){var o=new a.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=r,o[3]=n,o},n.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},n.set=function(t,e,r,a,n){return t[0]=e,t[1]=r,t[2]=a,t[3]=n,t},n.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t},n.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t},n.sub=n.subtract,n.multiply=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t},n.mul=n.multiply,n.divide=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t},n.div=n.divide,n.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},n.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},n.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t},n.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t},n.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},n.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t},n.scaleAndAdd=function(t,e,r,a){return t[0]=e[0]+r[0]*a,t[1]=e[1]+r[1]*a,t[2]=e[2]+r[2]*a,t[3]=e[3]+r[3]*a,t},n.distance=function(t,e){var r=e[0]-t[0],a=e[1]-t[1],n=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(r*r+a*a+n*n+o*o)},n.dist=n.distance,n.squaredDistance=function(t,e){var r=e[0]-t[0],a=e[1]-t[1],n=e[2]-t[2],o=e[3]-t[3];return r*r+a*a+n*n+o*o},n.sqrDist=n.squaredDistance,n.length=function(t){var e=t[0],r=t[1],a=t[2],n=t[3];return Math.sqrt(e*e+r*r+a*a+n*n)},n.len=n.length,n.squaredLength=function(t){var e=t[0],r=t[1],a=t[2],n=t[3];return e*e+r*r+a*a+n*n},n.sqrLen=n.squaredLength,n.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},n.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},n.normalize=function(t,e){var r=e[0],a=e[1],n=e[2],o=e[3],i=r*r+a*a+n*n+o*o;return i>0&&(i=1/Math.sqrt(i),t[0]=r*i,t[1]=a*i,t[2]=n*i,t[3]=o*i),t},n.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},n.lerp=function(t,e,r,a){var n=e[0],o=e[1],i=e[2],u=e[3];return t[0]=n+a*(r[0]-n),t[1]=o+a*(r[1]-o),t[2]=i+a*(r[2]-i),t[3]=u+a*(r[3]-u),t},n.random=function(t,e){return e=e||1,t[0]=a.RANDOM(),t[1]=a.RANDOM(),t[2]=a.RANDOM(),t[3]=a.RANDOM(),n.normalize(t,t),n.scale(t,t,e),t},n.transformMat4=function(t,e,r){var a=e[0],n=e[1],o=e[2],i=e[3];return t[0]=r[0]*a+r[4]*n+r[8]*o+r[12]*i,t[1]=r[1]*a+r[5]*n+r[9]*o+r[13]*i,t[2]=r[2]*a+r[6]*n+r[10]*o+r[14]*i,t[3]=r[3]*a+r[7]*n+r[11]*o+r[15]*i,t},n.transformQuat=function(t,e,r){var a=e[0],n=e[1],o=e[2],i=r[0],u=r[1],l=r[2],s=r[3],c=s*a+u*o-l*n,f=s*n+l*a-i*o,h=s*o+i*n-u*a,M=-i*a-u*n-l*o;return t[0]=c*s+M*-i+f*-l-h*-u,t[1]=f*s+M*-u+h*-i-c*-l,t[2]=h*s+M*-l+c*-u-f*-i,t[3]=e[3],t},n.forEach=function(){var t=n.create();return function(e,r,a,n,o,i){var u,l;for(r||(r=4),a||(a=0),l=n?Math.min(n*r+a,e.length):e.length,u=a;u<l;u+=r)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],t[3]=e[u+3],o(t,t,i),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2],e[u+3]=t[3];return e}}(),n.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},n.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},n.equals=function(t,e){var r=t[0],n=t[1],o=t[2],i=t[3],u=e[0],l=e[1],s=e[2],c=e[3];return Math.abs(r-u)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(n-l)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(o-s)<=a.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(i-c)<=a.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))},t.exports=n},function(t,e){function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function n(t){if(c===setTimeout)return setTimeout(t,0);if((c===r||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function o(t){if(f===clearTimeout)return clearTimeout(t);if((f===a||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}function i(){m&&M&&(m=!1,M.length?d=M.concat(d):x=-1,d.length&&u())}function u(){if(!m){var t=n(i);m=!0;for(var e=d.length;e;){for(M=d,d=[];++x<e;)M&&M[x].run();x=-1,e=d.length}M=null,m=!1,o(t)}}function l(t,e){this.fun=t,this.array=e}function s(){}var c,f,h=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:r}catch(t){c=r}try{f="function"==typeof clearTimeout?clearTimeout:a}catch(t){f=a}}();var M,d=[],m=!1,x=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];d.push(new l(t,e)),1!==d.length||m||n(u)},l.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=s,h.addListener=s,h.once=s,h.off=s,h.removeListener=s,h.removeAllListeners=s,h.emit=s,h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(t,e,r){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),l=r(2),s=a(l),c=function(t){function e(t,r,a,i){return n(this,e),console.log("in LoadAudio class"),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r,a,i))}return i(e,t),u(e,[{key:"init",value:function(){}}]),e}(s["default"]);e["default"]=c},function(t,e,r){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),l=r(2),s=a(l),c=function(t){function e(t,r,a,i){return n(this,e),console.log("in LoadModel class"),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r,a,i))}return i(e,t),u(e,[{key:"init",value:function(){}}]),e}(s["default"]);e["default"]=c},function(t,e,r){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),l=r(2),s=a(l),c=function(t){function e(t,r,a,i){n(this,e),console.log("in LoadTexture class");var u=3,l=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r,a,i,u));return l.MAX_TIMEOUT=10,l.greyPixel=new Uint8Array([.5,.5,.5,1]),l}return i(e,t),u(e,[{key:"init",value:function(){}},{key:"setDefaultTexturePixel",value:function(t,e){var r=make1Pixel(options.color);if(target===t.TEXTURE_CUBE_MAP)for(var a=0;a<6;++a)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+a,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,r);else target===t.TEXTURE_3D?t.texImage3D(target,0,t.RGBA,1,1,1,0,t.RGBA,t.UNSIGNED_BYTE,r):t.texImage2D(target,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,r)}},{key:"createLoadObj",value:function(t){var e=this,r=(this.webgl.getContext(),{});return r.image=new Image,r.image.crossOrigin="anonymous",r.callback=t.callback,r.prim=t.attach,r.busy=!0,r.image.addEventListener("load",function(t){return e.uploadTexture(r,r.callback)}),r.image.addEventListener("error",function(e){return console.log("error loading image:"+t.source)},!1),r.image.src=t.source,this.cacheCt++,r}},{key:"uploadTexture",value:function(t,e){console.log("In uploadTexture() for src:"+t.image.src);var r=this.webgl.getContext(),a=t.prim.textures;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!0);var n={image:t.image,src:t.image.src,texture:r.createTexture()};r.bindTexture(r.TEXTURE_2D,n.texture),n.image?r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,n.image):(console.error("no loadObj.image for:"+n.image.src+", default pixel texture"),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,this.greyPixel)),this.util.isPowerOfTwo(n.image.width)&&this.util.isPowerOfTwo(n.image.height)?(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR_MIPMAP_NEAREST),r.generateMipmap(r.TEXTURE_2D)):(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR)),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.bindTexture(r.TEXTURE_2D,null),a.push(n),t.busy=!1,this.update(t)}},{key:"uploadCubeTexture",value:function(){}},{key:"upload3DTexture",value:function(){}}]),e}(s["default"]);e["default"]=c},function(t,e,r){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),l=r(2),s=a(l),c=function(t){function e(t,r,a,i){return n(this,e),console.log("in LoadVideo class"),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r,a,i))}return i(e,t),u(e,[{key:"init",value:function(){}}]),e}(s["default"]);e["default"]=c},function(t,e){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),n=function(){function t(e,a,n,o,i,u,l,s){r(this,t),console.log("in Prim class"),this.util=a,this.webgl=o,this.glMatrix=n,this.loadModel=i,this.loadTexture=u,this.loadAudio=l,this.loadVideo=s,this.objs=[],this.type={POINT:"POINT",LINE:"LINE",PLANE:"PLANE",CUBE:"CUBE",SPHERE:"SPHERE",DOME:"DOME",CONE:"CONE",CYLINDER:"CYLINDER",POLY:"POLY"}}return a(t,[{key:"setId",value:function(){var t=(new Date).getTime(),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var r=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?r:3&r|8).toString(16)});return e}},{key:"setVertexData",value:function(t){t=[];this.objs.length;for(var e in this.objs)t=t.concat(this.objs[e].vertices);return t}},{key:"setIndexData",value:function(t){t=[];this.objs.length;for(var e in this.objs)t=t.concat(this.objs[e].indices);return t}},{key:"geometryPoint",value:function(){}},{key:"geometryLine",value:function(){}},{key:"geometryPlane",value:function(){}},{key:"geometryCube",value:function(t){var e=this.webgl.getContext(),r=(t.dimensions[0]/2,t.dimensions[1]/2,t.dimensions[2]/2,[-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),a=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,a),e.bufferData(e.ARRAY_BUFFER,new Float32Array(r),e.STATIC_DRAW);var n=[0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1],o=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,o),e.bufferData(e.ARRAY_BUFFER,new Float32Array(n),e.STATIC_DRAW);var i=[1,1,1,1,1,0,0,1,0,1,0,1,0,0,1,1,1,1,1,1,1,0,0,1,0,1,0,1,0,0,1,1,1,1,1,1,1,0,0,1,0,1,0,1,0,0,1,1,1,1,1,1,1,0,0,1,0,1,0,1,0,0,1,1,1,1,1,1,1,0,0,1,0,1,0,1,0,0,1,1,1,1,1,1,1,0,0,1,0,1,0,1,0,0,1,1],u=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,u),e.bufferData(e.ARRAY_BUFFER,new Float32Array(i),e.STATIC_DRAW);var l=[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23],s=e.createBuffer();return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,s),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(l),e.STATIC_DRAW),{vertices:{data:r,buffer:a,itemSize:3,numItems:r.length/3},texCoords:{data:n,buffer:o,itemSize:2,numItems:n.length/2},colors:{data:i,buffer:u,itemSize:4,numItems:i.length/4},indices:{data:l,buffer:s,itemSize:1,numItems:l.length}}}},{key:"geometrySphere",value:function(){}},{key:"subdivide",value:function(t){function e(t,e){var n=a(t,e),o=r(n),i=l[o];return i?i:l[o]=n}function r(t){return t[0].toPrecision(6)+","+t[1].toPrecision(6)+","+t[2].toPrecision(6)}function a(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2,(t[2]+e[2])/2]}for(var n=t.positions,o=t.cells,i=[],u=[],l={},s=0,c=0;c<o.length;c++){var f=o[c],h=f[0],M=f[1],d=f[2],m=n[h],x=n[M],v=n[d],S=e(m,x),b=e(x,v),g=e(v,m),I=u.indexOf(S);I===-1&&(I=s++,u.push(S));var D=u.indexOf(b);D===-1&&(D=s++,u.push(b));var F=u.indexOf(g);F===-1&&(F=s++,u.push(g));var p=u.indexOf(m);p===-1&&(p=s++,u.push(m));var E=u.indexOf(x);E===-1&&(E=s++,u.push(x));var y=u.indexOf(v);y===-1&&(y=s++,u.push(v)),i.push([p,I,F]),i.push([E,D,I]),i.push([y,F,D]),i.push([I,D,F])}return{cells:i,positions:u}}},{key:"geometryIcoSphere",value:function(t){function e(t){for(var e=0,r=0;r<t.length;r++)e+=t[r]*t[r];if(e=Math.sqrt(e),0===e)return Array.apply(null,new Array(t.length)).map(Number.prototype.valueOf,0);for(var r=0;r<t.length;r++)t[r]/=e;return t}t=0|+t;for(var r=.5+Math.sqrt(5)/2,a=[[-1,+r,0],[1,+r,0],[-1,-r,0],[1,-r,0],[0,-1,+r],[0,1,+r],[0,-1,-r],[0,1,-r],[+r,0,-1],[+r,0,1],[-r,0,-1],[-r,0,1],[0,11,5],[0,5,1],[0,1,7],[0,7,10],[0,10,11]],n=[[1,5,9],[5,11,4],[11,10,2],[10,7,6],[7,1,8],[3,9,4],[3,4,2],[3,2,6],[3,6,8],[3,8,9],[4,9,5],[2,4,11],[6,2,10],[8,6,7],[9,8,1]],o={cells:n,positions:a};t-- >0;)o=this.subdivide(o);a=o.positions;for(var i=0;i<a.length;i++)e(a[i]);return o}},{key:"geometryDome",value:function(){}},{key:"geometryCone",value:function(){}},{key:"geometryCylinder",value:function(){}},{key:"geometryPoly",value:function(){}},{key:"setMaterial",value:function(t){t.material={u_colorMult:0,u_diffuse:t.textures[0],u_specular:[1,1,1,1],u_shininess:this.util.rand(500),u_specularFactor:this.util.randrand(1)}}},{key:"createPrim",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"unknown",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments[2],a=arguments[3],n=arguments[4],o=arguments[5],i=arguments[6],u=arguments[7],l=(arguments[8],arguments[9]),s=(this.webgl.getContext(),this.glMatrix),c={};c.id=this.setId(),c.name=t,c.scale=e,c.dimensions=r||s.vec3.create(1,1,1),c.position=a||s.vec3.create(0,0,0),c.acceleration=n||s.vec3.create(0,0,0),c.rotation=o||s.vec3.create(0,0,0),c.angular=i||s.vec3.create(0,0,0),c.textures=[];for(var f=0;f<u.length;f++)this.loadTexture.load(u[f],c);return c.material={},c.parentNode=null,c.children=[],c.renderId=l,c}},{key:"createCube",value:function(t,e,r,a,n,o,i,u,l,s){var c=this.createPrim(t,e,r,a,n,o,i,u,l);return c.geometry=this.geometryCube(c),c.type=this.type.CUBE,console.log("vertex itemSize:"+c.geometry.vertices.itemSize),
console.log("vertex numItems:"+c.geometry.vertices.numItems),console.log("texture itemSize:"+c.geometry.texCoords.itemSize),console.log("texture numItems:"+c.geometry.texCoords.numItems),console.log("index itemSize"+c.geometry.indices.itemSize),console.log("index numItems:"+c.geometry.indices.numItems),this.objs.push(c),c}},{key:"createIcoSphere",value:function(){}}]),t}();e["default"]=n},function(t,e){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),n=function(){function t(e,a,n,o){r(this,t),console.log("In Renderer class"),this.webgl=o,this.util=o.util,this.glMatrix=o.glMatrix,this.pMatrix=this.glMatrix.mat4.create(),this.mvMatrix=this.glMatrix.mat4.create(),this.renderers={vs1:"textured",vs2:"colored",vs3:"texturedLight",vs4:"water"},this.init}return a(t,[{key:"objVS1",value:function(){var t=["attribute vec3 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat4 uMVMatrix;","uniform mat4 uPMatrix;","varying vec2 vTextureCoord;","void main(void) {","    gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);","    vTextureCoord = aTextureCoord;","}"];return{code:t.join("\n"),varList:this.webgl.createVarList(t)}}},{key:"objFS1",value:function(){var t=["precision mediump float;","varying vec2 vTextureCoord;","uniform sampler2D uSampler;","void main(void) {","    gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));","}"];return{code:t.join("\n"),varList:this.webgl.createVarList(t)}}},{key:"objVS2",value:function(){var t=["attribute vec3 aVertexPosition;","attribute vec4 aVertexColor;","uniform mat4 uMVMatrix;","uniform mat4 uPMatrix;","varying lowp vec4 vColor;","void main(void) {","    gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);","    vColor = aVertexColor;","}"];return{code:t.join("\n"),varList:this.webgl.createVarList(t)}}},{key:"objFS2",value:function(){var t=["varying lowp vec4 vColor;","void main(void) {","gl_FragColor = vColor;","}"];return{code:t.join("\n"),varList:this.webgl.createVarList(t)}}},{key:"getRenderer",value:function(t,e){switch(t){case this.renderers.vs1:return{init:this.initVS1,render:this.renderVS1,objs:e};case this.renderers.vs2:return{init:this.initVS2,render:this.renderVS2,objs:e};default:console.error("no renderer available by that name")}}},{key:"update",value:function(t,e){var r=this.glMatrix.mat4,a=this.glMatrix.vec3,n=-5;r.identity(this.mvMatrix),a.add(t.position,t.position,t.acceleration),r.translate(e,e,[t.position[0],t.position[1],n+t.position[2]]),a.add(t.rotation,t.rotation,t.angular),r.rotate(e,e,t.rotation[0],[1,0,0]),r.rotate(e,e,t.rotation[1],[0,1,0]),r.rotate(e,e,t.rotation[2],[0,0,1])}},{key:"initVS1",value:function(t){this.webgl.getContext();this.vs1={},this.vs1.program=this.webgl.createProgram(this.objVS1(),this.objFS1());var e=this.vs1.program;e.renderList=t,e.vsVars.attribute=this.webgl.setAttributeLocations(e.shaderProgram,e.vsVars.attribute),e.vsVars.uniform=this.webgl.setUniformLocations(e.shaderProgram,e.vsVars.uniform),e.fsVars.uniform=this.webgl.setUniformLocations(e.shaderProgram,e.fsVars.uniform)}},{key:"renderVS1",value:function(t){var e=this.webgl.getContext(),r=this.webgl.getCanvas(),a=this.glMatrix.mat4,n=(this.glMatrix.vec3,this.vs1.program),o=n.vsVars,i=n.fsVars;e.useProgram(n.shaderProgram),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.viewport(0,0,e.viewportWidth,e.viewportHeight),a.perspective(this.pMatrix,.4*Math.PI,r.width/r.height,.1,100);for(var u=n.renderList.length,l=0;l<u;l++){var s=n.renderList[l];s.textures[0]&&s.textures[0].texture&&(this.update(s,this.mvMatrix),e.bindBuffer(e.ARRAY_BUFFER,s.geometry.vertices.buffer),e.enableVertexAttribArray(o.attribute.vec3.aVertexPosition),e.vertexAttribPointer(o.attribute.vec3.aVertexPosition,s.geometry.vertices.itemSize,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,s.geometry.texCoords.buffer),e.enableVertexAttribArray(o.attribute.vec2.aTextureCoord),e.vertexAttribPointer(o.attribute.vec2.aTextureCoord,s.geometry.texCoords.itemSize,e.FLOAT,!1,0,0),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,null),e.bindTexture(e.TEXTURE_2D,s.textures[0].texture),e.uniform1i(i.uniform.sampler2D.uSampler,0),e.uniformMatrix4fv(o.uniform.mat4.uPMatrix,!1,this.pMatrix),e.uniformMatrix4fv(o.uniform.mat4.uMVMatrix,!1,this.mvMatrix),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,s.geometry.indices.buffer),e.drawElements(e.TRIANGLES,s.geometry.indices.numItems,e.UNSIGNED_SHORT,0))}}},{key:"initVS2",value:function(t){this.webgl.getContext();this.vs2={},this.vs2.program=this.webgl.createProgram(this.objVS2(),this.objFS2());var e=this.vs2.program;e.renderList=objs,e.vsVars.attribute=this.webgl.setAttributeLocations(e.shaderProgram,e.vsVars.attribute),e.vsVars.uniform=this.webgl.setUniformLocations(e.shaderProgram,e.vsVars.uniform),e.fsVars.uniform=this.webgl.setUniformLocations(e.shaderProgram,e.fsVars.uniform),this.xRot=1e-4,this.yRot=1e-4,this.zRot=1e-4}},{key:"renderVS2",value:function(){var t=this.webgl.getContext(),e=this.webgl.getCanvas(),r=this.glMatrix.mat4,a=this.vs2.program;t.useProgram(a.shaderProgram);var n=a.vsVars;t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),t.viewport(0,0,t.viewportWidth,t.viewportHeight),r.perspective(this.pMatrix,.4*Math.PI,e.width/e.height,.1,100),r.identity(this.mvMatrix);var o=1,i=1;this.yRot+=o,this.zRot+=i;for(var u=-5,l=a.renderList.length,s=0;s<l;s++){var c=a.renderList[s];r.translate(this.mvMatrix,this.mvMatrix,[0,0,u]),r.rotate(this.mvMatrix,this.mvMatrix,this.util.degToRad(this.xRot),[1,0,0]),r.rotate(this.mvMatrix,this.mvMatrix,this.util.degToRad(this.yRot),[0,1,0]),r.rotate(this.mvMatrix,this.mvMatrix,this.util.degToRad(this.zRot),[0,0,1]),t.bindBuffer(t.ARRAY_BUFFER,c.geometry.vertices.buffer),t.enableVertexAttribArray(n.attribute.vec3.aVertexPosition),t.vertexAttribPointer(n.attribute.vec3.aVertexPosition,c.geometry.vertices.itemSize,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,c.geometry.colors.buffer),t.enableVertexAttribArray(n.attribute.vec4.aVertexColor),t.vertexAttribPointer(n.attribute.vec4.aVertexColor,c.geometry.colors.itemSize,t.FLOAT,!1,0,0),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,c.geometry.indices.buffer),t.uniformMatrix4fv(n.uniform.mat4.uPMatrix,!1,this.pMatrix),t.uniformMatrix4fv(n.uniform.mat4.uMVMatrix,!1,this.mvMatrix),t.drawElements(t.TRIANGLES,c.geometry.indices.numItems,t.UNSIGNED_SHORT,0)}}}]),t}();e["default"]=n},function(t,e){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),n=function(){function t(){r(this,t),console.log("in Util")}return a(t,[{key:"isString",value:function(t){return"string"==typeof t||isObjectLike(t)&&objToString.call(t)==stringTag||!1}},{key:"isIFrame",value:function(){try{return window.self!==window.top}catch(t){return!0}return!1}},{key:"isPowerOfTwo",value:function(t){return 0===(t&t-1)}},{key:"degToRad",value:function(t){return t*Math.PI/180}},{key:"getRand",value:function(t,e){return void 0===e&&(e=t,t=0),t+Math.random()*(e-t)}},{key:"getRandInt",value:function(t){return Math.floor(Math.random()*t)}}]),t}();e["default"]=n},function(t,e){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),n=function(){function t(e,a,n,o){r(this,t),console.log("in webGL class"),this.gl=this.vs=this.vs=null,this.contextCount=0,this.glVers=0,this.glMatrix=a,this.util=n,e===!0&&this.init(canvas),o&&(this.debug=o)}return a(t,[{key:"clearTextures",value:function(){for(var t=this.gl,e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),r=0;r<e;r++)t.activeTexture(t.TEXTURE0+r),t.bindTexture(t.TEXTURE_2D,null),t.bindTexture(t.TEXTURE_CUBE_MAP,null);t.bindBuffer(t.ARRAY_BUFFER,null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null)}},{key:"init",value:function(t,e,r){var a=this;if(t?t=this.util.isString(t)?document.getElementById(t):t:(t=document.createElement("canvas"),t.width=480,t.height=320,document.body.appendChild(t)),t){var n=t.getBoundingClientRect();if(t.width=n.width,t.height=n.height,this.gl=this.createContext(t),this.gl){var o=this.gl;if(t.addEventListener("webglcontextlost",function(t){console.error("error: webglcontextlost event, context count:"+a.contextCount),e&&(a.gl=null,e(t)),t.preventDefault()},!1),t.addEventListener("webglcontextrestored",function(t){console.error("error: webglcontextrestored event, context count:"+a.contextCount),r&&r(t),t.preventDefault()},!1),o.viewportWidth=t.width,o.viewportHeight=t.height,window.addEventListener("resize",function(t){a.resizeCanvas(),t.preventDefault()},!1),o.getParameter&&o.getShaderPrecisionFormat){this.stats={};var i=this.stats;i.highp=o.getShaderPrecisionFormat(o.FRAGMENT_SHADER,o.HIGH_FLOAT),i.maxTexSize=o.getParameter(o.MAX_TEXTURE_SIZE),i.maxCubeSize=o.getParameter(o.MAX_CUBE_MAP_TEXTURE_SIZE),i.maxRenderbufferSize=o.getParameter(o.MAX_RENDERBUFFER_SIZE),i.combinedUnits=o.getParameter(o.MAX_COMBINED_TEXTURE_IMAGE_UNITS),i.maxVSattribs=o.getParameter(o.MAX_VERTEX_ATTRIBS),i.maxVertexShader=o.getParameter(o.MAX_VERTEX_UNIFORM_VECTORS),i.maxFragmentShader=o.getParameter(o.MAX_FRAGMENT_UNIFORM_VECTORS)}else this.stats=!1;return this.clearTextures(),o.enable(o.DEPTH_TEST),o.enable(o.CULL_FACE),o.clearDepth(1),o.depthFunc(o.LEQUAL),o.enable(o.BLEND),o.blendFunc(o.SRC_ALPHA,o.ONE),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),o.clearColor(.1,.1,.1,1),this.gl}}return null}},{key:"stats",value:function(){}},{key:"ready",value:function(){var t=this.gl;return console.log("this.gl:"+t+" this.glMatrix:"+this.glMatrix),!(!t||!this.glMatrix)}},{key:"getCanvas",value:function(){return this.gl?this.gl.canvas:null}},{key:"resizeCanvas",value:function(){if(this.ready()){var t=Math.max(window.devicePixelRatio,1),e=this.getContext(),r=this.getCanvas(),a=r.clientWidth*t|0,n=r.clientHeight*t|0;if(r.width!==a||r.height!==n)return r.width=a,r.height=n,e.viewportWidth=r.width,e.viewportHeight=r.height,!0}return!1}},{key:"createContext",value:function(t){var e=null;e&&this.contextCount>1&&(console.warn("killing context"),this.killContext(),this.contextCount--,e=null);for(var r=["webgl2","experimental-webgl2","webgl","experimental-webgl"],a=0;a<r.length;){try{if(this.debug){e=this.debug.makeDebugContext(t.getContext(r[a])),window.gl=e,console.warn("using experimental webgl debug context");break}e=t.getContext(r[a])}catch(n){}if(e&&e.getParameter){switch(this.glVersStr=e.getParameter(e.VERSION).toLowerCase(),a){case 0:case 1:this.glVers=2;break;case 2:case 3:this.glVers=Math.ceil(parseFloat(this.glVersStr.substr(6))),this.addVertexBufferSupport(e)}break}a++}return this.gl=e,this.gl&&"function"==typeof this.gl.getParameter&&this.contextCount++,this.gl}},{key:"getContext",value:function(){return this.gl||console.warn("warning webgl context not initialized"),this.gl}},{key:"killContext",value:function(){console.log("in killcontext, count:"+this.contextCount),this.contextCount&&(console.log("killing WebGL context, count before:"+this.contextCount),this.gl.getExtension("WEBGL_lose_context").loseContext(),this.contextCount--)}},{key:"addVertexBufferSupport",value:function(t){var e=t.getExtension("OES_vertex_array_object");e&&(t.createVertexArray=function(){return e.createVertexArrayOES()},t.deleteVertexArray=function(t){e.deleteVertexArrayOES(t)},t.isVertexArray=function(t){return e.isVertexArrayOES(t)},t.bindVertexArray=function(t){e.bindVertexArrayOES(t)},t.VERTEX_ARRAY_BINDING=e.VERTEX_ARRAY_BINDING_OES)}},{key:"createShader",value:function(t,e){var r=null;if(t&&e){if(this.ready()){var a=this.gl;e.replace(/^[ \t]*\n/,""),t===a.VERTEX_SHADER?r=this.vs=a.createShader(t):t===a.FRAGMENT_SHADER?r=this.fs=a.createShader(t):console.error("createShader: type not recognized:"+t),a.shaderSource(r,e),a.compileShader(r),a.getShaderParameter(r,a.COMPILE_STATUS)||(console.error("createShader:"+a.getShaderInfoLog(r)),t===a.VERTEX_SHADER?this.vs=null:t==a.FRAGMENT_SHADER&&(this.fs=null),r=null)}}else console.error("createShader: invalid params, type:"+t+" source:"+e);return r}},{key:"createVertexShader",value:function(t){return this.createShader(this.gl.VERTEX_SHADER,t)}},{key:"createFragmentShader",value:function(t){return this.createShader(this.gl.FRAGMENT_SHADER,t)}},{key:"fetchShader",value:function(t,e){var r=this;return fetch(e,{method:"POST",mode:"cors",redirect:"follow",headers:new Headers({"Content-Type":"text/plain"})}).then(function(t){return console.log(text),!!t.ok&&t.text()}).then(function(e){if(e)return r.createShader(t,e)}),null}},{key:"fetchVertexShader",value:function(t){return this.fetchShader(this.gl.VERTEX_SHADER,t)}},{key:"fetchFragmentShader",value:function(t){return this.fetchShader(this.gl.FRAGMENT_SHADER,t)}},{key:"createShaderFromTag",value:function(t){if(this.util.isString(t)&&(t=document.getElementById(t)),!t)return console.error("createShaderFromTag: not found ("+t+")"),!1;var e=null;if("x-shader/x-vertex"==t.type)e=this.gl.VERTEX_SHADER;else{if("x-shader/x-fragment"!=t.type)return console.error("createShaderFromTag: type not found:("+t.type+")"),null;e=this.gl.FRAGMENT_SHADER}for(var r="",a=t.firstChild;a;)3==a.nodeType&&(r+=a.textContent),a=a.nextSibling;return this.createShader(e,r)}},{key:"createProgram",value:function(t,e){if(!t||!e)return console.error("createProgram: parameter error, vs:"+t+" fs:"+e),null;var r={};if(this.ready()){var a=this.gl,n=this.createVertexShader(t.code),o=this.createFragmentShader(e.code),i=a.createProgram();a.attachShader(i,n),a.attachShader(i,o),a.linkProgram(i),a.getProgramParameter(i,a.LINK_STATUS)?(r.shaderProgram=i,r.vsVars=t.varList,r.fsVars=e.varList):console.error("createProgram:"+a.getProgramInfoLog(i))}return r}},{key:"createVarList",value:function(t){var e=t.length,r=" ",a={},n=["attribute","uniform","varying"];if(e)for(var o=0;o<t.length;o++){var i=t[o];if(i.indexOf("void main")!==-1)break;for(var u=0;u<n.length;u++){var l=n[u];if(a[l]||(a[l]={}),i.indexOf(l)>-1){console.log("SSS1:"+i),i=i.replace(/;\s*$/,""),console.log("SSS:"+i),i=i.split(r),console.log("FIRST: "+i);var s=i.shift();a[s]||(a[s]={}),console.log("SECOND AFTER SHIFT:"+s+" remainder:"+i);var c=i.shift();a[s][c]||(a[s][c]={});var f=i.shift();a[s][c][f]||(a[s][c][f]="empty"),console.log("THIRD AFTER SHIFT:"+c+" remainder:"+i)}}}return a}},{key:"setAttributeLocations",value:function(t,e){var r=this.gl;for(var a in e){var n=e[a];console.log("PGGGG:"+n);for(var o in n)n[o]=r.getAttribLocation(t,o),r.enableVertexAttribArray(n[o]),console.log("gl.getAttribLocation( shaderProgram, '"+o+"' ) is:"+n[o])}return e}},{key:"setUniformLocations",value:function(t,e){var r=this.gl;for(var a in e){var n=e[a];console.log("UGGGG:"+n);for(var o in n)n[o]=r.getUniformLocation(t,o),console.log("gl.getUniformLocation( shaderProgram,"+o+") is:"+n[o])}return e}},{key:"bindAttributeLocations",value:function(t,e){var r=this.gl;if(e){this.attrib={};for(var a in e)console.log("binding attribute:"+a+" to:"+e[a]),r.bindAttribLocation(t,e[a],a),this.attrib[a]=e[a]}else console.warn("webgl.bindAttributes: no attributes supplied")}},{key:"getAttributes",value:function(t){for(var e=this.gl,r={},a=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),n=0;n<a;n++){var o=e.getActiveAttrib(t,n);console.log("ADDING ATTRIB:"+o.name),r[o.name]=e.getAttribLocation(t,o.name)}return r.count=a,r}},{key:"getUniforms",value:function(t){for(var e=this.gl,r={},a=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n="",o=0;o<a;o++){var i=e.getActiveUniform(t,o);n=i.name.replace("[0]",""),console.log("ADDING UNIVORM:"+n),r[n]=e.getUniformLocation(t,n)}return r.count=a,r}},{key:"getVarying",value:function(t){}},{key:"createVBO",value:function(t,e){if(!t)return console.error("createVBO: empty data"),null;if(!t.itemSize)return console.error("createVBO: itemSize must be specified"),null;if(!t.numItems)return console.error("createVBO: numitems must be specified"),null;if(!e)return console.error("createVBO: draw usage must be specified"),null;var r=null;if(this.ready()){var a=this.gl;r=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,r),a.bufferData(a.ARRAY_BUFFER,new Float32Array(t),e),r.itemSize=t.itemSize,r.numItems=t.numItems,this.vbo=r}return r}},{key:"createIBO",value:function(t,e){if(!t)return console.error("createIBO: empty data"),null;if(!t.itemSize)return console.error("createIBO: itemSize must be specified"),null;if(!t.numItems)return console.error("createIBO: numitems must be specified"),null;if(!e)return console.error("createIBO: draw usage must be specified"),null;var r=null;if(this.ready()){var a=this.gl;r=a.createBuffer(),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,r),a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array(t),e),r.itemSize=t.itemSize,r.numItems=t.numItems,this.ibo=r}return r}},{key:"createCBO",value:function(t,e){if(!t)return console.error("createCBO: empty data"),null;if(!t.itemSize)return console.error("createCBO: itemSize must be specified"),null;if(!t.numItems)return console.error("createCBO: numitems must be specified"),null;if(!e)return console.error("createCBO: drawing usage must be specified"),null;var r=null;if(this.ready()){var a=this.gl;r=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,r),a.bufferData(a.ARRAY_BUFFER,new Float32Array(t),e),r.itemSize=t.itemSize,r.numitems=t.numItems,this.cbo=r}return r}},{key:"createNBO",value:function(){return console.error("webgl.createNBO NOT IMPLEMENTED"),null}},{key:"checkShaders",value:function(){var t=this.gl;return!!t.getProgramParameter(this.program,t.LINK_STATUS)||(this.vs&&!t.getShaderParameter(this.vs,t.COMPILE_STATUS)?console.error("error creating the vertex shader, "+t.getShaderInfoLog(this.vs)):this._fragmentShader&&!t.getShaderParameter(this._fragmentShader,t.COMPILE_STATUS)?console.error("error creating the fragment shader, "+t.getShaderInfoLog(this.fs)):console.error("error in gl program linking"),t.deleteProgram(this.program),t.deleteShader(this.vs),t.deleteShader(this.fs),this.program=this.vs=this.fs=null,!1)}},{key:"checkBufferObjects",value:function(t){return t&&t instanceof ArrayBuffer}}]),t}();e["default"]=n},function(t,e){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),n=function(){function t(e,a,n,o){r(this,t),console.log("in webVR class"),this.util=a,this.glMatrix=n,this.webgl=o,this.init===!0}return a(t,[{key:"init",value:function(){}}]),t}();e["default"]=n},function(t,e){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),n=function(){function t(e,a,n){r(this,t),console.log("in World class"),this.webgl=e,this.util=e.util,this.prim=a,this.renderer=n,this.canvas=e.getCanvas(),this.glMatrix=e.glMatrix,this.objs=[],this.objsVS1=[],this.objsVS2=[],this.objsVS3=[],this.objsVS4=[],this.pMatrix=this.glMatrix.mat4.create(),this.mvMatrix=this.glMatrix.mat4.create(),this.timeOld=this.time=0}return a(t,[{key:"mvPushMatrix",value:function(){var t=this.glMatrix.mat4,e=t.create();t.set(this.mvMatrix,e),mvMatrixStack.push(e)}},{key:"mvPopMatrix",value:function(){if(0==this.mvMatrixStack.length)throw"Invalid popMatrix!";mvMatrix=this.mvMatrixStack.pop()}},{key:"resize",value:function(t,e){}},{key:"init",value:function(){var t=(this.webgl.getContext(),this.prim,this.util);this.objs.push(this.prim.createCube("first cube",1,this.glMatrix.vec3.fromValues(1,1,1),this.glMatrix.vec3.fromValues(0,0,0),this.glMatrix.vec3.fromValues(0,0,0),this.glMatrix.vec3.fromValues(t.degToRad(0),t.degToRad(0),t.degToRad(0)),this.glMatrix.vec3.fromValues(t.degToRad(1),t.degToRad(1),t.degToRad(1)),["img/crate.png","img/webvr-logo1.png"],this.glMatrix.vec4.fromValues(.5,1,.2,1))),this.objs.push(this.prim.createCube("toji cube",1,this.glMatrix.vec3.fromValues(1,1,1),this.glMatrix.vec3.fromValues(5,1,-3),this.glMatrix.vec3.fromValues(0,0,0),this.glMatrix.vec3.fromValues(t.degToRad(40),t.degToRad(0),t.degToRad(0)),this.glMatrix.vec3.fromValues(t.degToRad(0),t.degToRad(1),t.degToRad(0)),["img/webvr-logo1.png"],this.glMatrix.vec4.fromValues(.5,1,.2,1))),this.renderer.initVS1(this.objs),this.render()}},{key:"create",value:function(){}},{key:"update",value:function(){}},{key:"render",value:function(){var t=this;this.update(),this.renderer.renderVS1(),requestAnimationFrame(function(){t.render()})}}]),t}();e["default"]=n},function(t,e,r){e.glMatrix=r(1),e.mat2=r(19),e.mat2d=r(20),e.mat3=r(4),e.mat4=r(21),e.quat=r(22),e.vec2=r(23),e.vec3=r(5),e.vec4=r(6)},function(t,e,r){var a=r(1),n={};n.create=function(){var t=new a.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},n.clone=function(t){var e=new a.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},n.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},n.fromValues=function(t,e,r,n){var o=new a.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=r,o[3]=n,o},n.set=function(t,e,r,a,n){return t[0]=e,t[1]=r,t[2]=a,t[3]=n,t},n.transpose=function(t,e){if(t===e){var r=e[1];t[1]=e[2],t[2]=r}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},n.invert=function(t,e){var r=e[0],a=e[1],n=e[2],o=e[3],i=r*o-n*a;return i?(i=1/i,t[0]=o*i,t[1]=-a*i,t[2]=-n*i,t[3]=r*i,t):null},n.adjoint=function(t,e){var r=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=r,t},n.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},n.multiply=function(t,e,r){var a=e[0],n=e[1],o=e[2],i=e[3],u=r[0],l=r[1],s=r[2],c=r[3];return t[0]=a*u+o*l,t[1]=n*u+i*l,t[2]=a*s+o*c,t[3]=n*s+i*c,t},n.mul=n.multiply,n.rotate=function(t,e,r){var a=e[0],n=e[1],o=e[2],i=e[3],u=Math.sin(r),l=Math.cos(r);return t[0]=a*l+o*u,t[1]=n*l+i*u,t[2]=a*-u+o*l,t[3]=n*-u+i*l,t},n.scale=function(t,e,r){var a=e[0],n=e[1],o=e[2],i=e[3],u=r[0],l=r[1];return t[0]=a*u,t[1]=n*u,t[2]=o*l,t[3]=i*l,t},n.fromRotation=function(t,e){var r=Math.sin(e),a=Math.cos(e);return t[0]=a,t[1]=r,t[2]=-r,t[3]=a,t},n.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},n.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},n.LDU=function(t,e,r,a){return t[2]=a[2]/a[0],r[0]=a[0],r[1]=a[1],r[3]=a[3]-t[2]*r[1],[t,e,r]},n.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t},n.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t},n.sub=n.subtract,n.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},n.equals=function(t,e){var r=t[0],n=t[1],o=t[2],i=t[3],u=e[0],l=e[1],s=e[2],c=e[3];return Math.abs(r-u)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(n-l)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(o-s)<=a.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(i-c)<=a.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))},n.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t},n.multiplyScalarAndAdd=function(t,e,r,a){return t[0]=e[0]+r[0]*a,t[1]=e[1]+r[1]*a,t[2]=e[2]+r[2]*a,t[3]=e[3]+r[3]*a,t},t.exports=n},function(t,e,r){var a=r(1),n={};n.create=function(){var t=new a.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},n.clone=function(t){var e=new a.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},n.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},n.fromValues=function(t,e,r,n,o,i){var u=new a.ARRAY_TYPE(6);return u[0]=t,u[1]=e,u[2]=r,u[3]=n,u[4]=o,u[5]=i,u},n.set=function(t,e,r,a,n,o,i){return t[0]=e,t[1]=r,t[2]=a,t[3]=n,t[4]=o,t[5]=i,t},n.invert=function(t,e){var r=e[0],a=e[1],n=e[2],o=e[3],i=e[4],u=e[5],l=r*o-a*n;return l?(l=1/l,t[0]=o*l,t[1]=-a*l,t[2]=-n*l,t[3]=r*l,t[4]=(n*u-o*i)*l,t[5]=(a*i-r*u)*l,t):null},n.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},n.multiply=function(t,e,r){var a=e[0],n=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=r[0],c=r[1],f=r[2],h=r[3],M=r[4],d=r[5];return t[0]=a*s+o*c,t[1]=n*s+i*c,t[2]=a*f+o*h,t[3]=n*f+i*h,t[4]=a*M+o*d+u,t[5]=n*M+i*d+l,t},n.mul=n.multiply,n.rotate=function(t,e,r){var a=e[0],n=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=Math.sin(r),c=Math.cos(r);return t[0]=a*c+o*s,t[1]=n*c+i*s,t[2]=a*-s+o*c,t[3]=n*-s+i*c,t[4]=u,t[5]=l,t},n.scale=function(t,e,r){var a=e[0],n=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=r[0],c=r[1];return t[0]=a*s,t[1]=n*s,t[2]=o*c,t[3]=i*c,t[4]=u,t[5]=l,t},n.translate=function(t,e,r){var a=e[0],n=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=r[0],c=r[1];return t[0]=a,t[1]=n,t[2]=o,t[3]=i,t[4]=a*s+o*c+u,t[5]=n*s+i*c+l,t},n.fromRotation=function(t,e){var r=Math.sin(e),a=Math.cos(e);return t[0]=a,t[1]=r,t[2]=-r,t[3]=a,t[4]=0,t[5]=0,t},n.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},n.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},n.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},n.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t},n.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t},n.sub=n.subtract,n.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t},n.multiplyScalarAndAdd=function(t,e,r,a){return t[0]=e[0]+r[0]*a,t[1]=e[1]+r[1]*a,t[2]=e[2]+r[2]*a,t[3]=e[3]+r[3]*a,t[4]=e[4]+r[4]*a,t[5]=e[5]+r[5]*a,t},n.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},n.equals=function(t,e){var r=t[0],n=t[1],o=t[2],i=t[3],u=t[4],l=t[5],s=e[0],c=e[1],f=e[2],h=e[3],M=e[4],d=e[5];return Math.abs(r-s)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(n-c)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(o-f)<=a.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(i-h)<=a.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(u-M)<=a.EPSILON*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(l-d)<=a.EPSILON*Math.max(1,Math.abs(l),Math.abs(d))},t.exports=n},function(t,e,r){var a=r(1),n={scalar:{},SIMD:{}};n.create=function(){var t=new a.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.clone=function(t){var e=new a.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},n.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},n.fromValues=function(t,e,r,n,o,i,u,l,s,c,f,h,M,d,m,x){var v=new a.ARRAY_TYPE(16);return v[0]=t,v[1]=e,v[2]=r,v[3]=n,v[4]=o,v[5]=i,v[6]=u,v[7]=l,v[8]=s,v[9]=c,v[10]=f,v[11]=h,v[12]=M,v[13]=d,v[14]=m,v[15]=x,v},n.set=function(t,e,r,a,n,o,i,u,l,s,c,f,h,M,d,m,x){return t[0]=e,t[1]=r,t[2]=a,t[3]=n,t[4]=o,t[5]=i,t[6]=u,t[7]=l,t[8]=s,t[9]=c,t[10]=f,t[11]=h,t[12]=M,t[13]=d,t[14]=m,t[15]=x,t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.scalar.transpose=function(t,e){if(t===e){var r=e[1],a=e[2],n=e[3],o=e[6],i=e[7],u=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=a,t[9]=o,t[11]=e[14],t[12]=n,t[13]=i,t[14]=u}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},n.SIMD.transpose=function(t,e){var r,a,n,o,i,u,l,s,c,f;return r=SIMD.Float32x4.load(e,0),a=SIMD.Float32x4.load(e,4),n=SIMD.Float32x4.load(e,8),o=SIMD.Float32x4.load(e,12),i=SIMD.Float32x4.shuffle(r,a,0,1,4,5),u=SIMD.Float32x4.shuffle(n,o,0,1,4,5),l=SIMD.Float32x4.shuffle(i,u,0,2,4,6),s=SIMD.Float32x4.shuffle(i,u,1,3,5,7),SIMD.Float32x4.store(t,0,l),SIMD.Float32x4.store(t,4,s),i=SIMD.Float32x4.shuffle(r,a,2,3,6,7),u=SIMD.Float32x4.shuffle(n,o,2,3,6,7),c=SIMD.Float32x4.shuffle(i,u,0,2,4,6),f=SIMD.Float32x4.shuffle(i,u,1,3,5,7),SIMD.Float32x4.store(t,8,c),SIMD.Float32x4.store(t,12,f),t},n.transpose=a.USE_SIMD?n.SIMD.transpose:n.scalar.transpose,n.scalar.invert=function(t,e){var r=e[0],a=e[1],n=e[2],o=e[3],i=e[4],u=e[5],l=e[6],s=e[7],c=e[8],f=e[9],h=e[10],M=e[11],d=e[12],m=e[13],x=e[14],v=e[15],S=r*u-a*i,b=r*l-n*i,g=r*s-o*i,I=a*l-n*u,D=a*s-o*u,F=n*s-o*l,p=c*m-f*d,E=c*x-h*d,y=c*v-M*d,w=f*x-h*m,R=f*v-M*m,A=h*v-M*x,T=S*A-b*R+g*w+I*y-D*E+F*p;return T?(T=1/T,t[0]=(u*A-l*R+s*w)*T,t[1]=(n*R-a*A-o*w)*T,t[2]=(m*F-x*D+v*I)*T,t[3]=(h*D-f*F-M*I)*T,t[4]=(l*y-i*A-s*E)*T,t[5]=(r*A-n*y+o*E)*T,t[6]=(x*g-d*F-v*b)*T,t[7]=(c*F-h*g+M*b)*T,t[8]=(i*R-u*y+s*p)*T,t[9]=(a*y-r*R-o*p)*T,t[10]=(d*D-m*g+v*S)*T,t[11]=(f*g-c*D-M*S)*T,t[12]=(u*E-i*w-l*p)*T,t[13]=(r*w-a*E+n*p)*T,t[14]=(m*b-d*I-x*S)*T,t[15]=(c*I-f*b+h*S)*T,t):null},n.SIMD.invert=function(t,e){var r,a,n,o,i,u,l,s,c,f,h=SIMD.Float32x4.load(e,0),M=SIMD.Float32x4.load(e,4),d=SIMD.Float32x4.load(e,8),m=SIMD.Float32x4.load(e,12);return i=SIMD.Float32x4.shuffle(h,M,0,1,4,5),a=SIMD.Float32x4.shuffle(d,m,0,1,4,5),r=SIMD.Float32x4.shuffle(i,a,0,2,4,6),a=SIMD.Float32x4.shuffle(a,i,1,3,5,7),i=SIMD.Float32x4.shuffle(h,M,2,3,6,7),o=SIMD.Float32x4.shuffle(d,m,2,3,6,7),n=SIMD.Float32x4.shuffle(i,o,0,2,4,6),o=SIMD.Float32x4.shuffle(o,i,1,3,5,7),i=SIMD.Float32x4.mul(n,o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),u=SIMD.Float32x4.mul(a,i),l=SIMD.Float32x4.mul(r,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,i),u),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,i),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),i=SIMD.Float32x4.mul(a,n),i=SIMD.Float32x4.swizzle(i,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),u),c=SIMD.Float32x4.mul(r,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(o,i)),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,i),c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),i=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(a,2,3,0,1),o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),n=SIMD.Float32x4.swizzle(n,2,3,0,1),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,i),u),s=SIMD.Float32x4.mul(r,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(n,i)),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,i),s),
s=SIMD.Float32x4.swizzle(s,2,3,0,1),i=SIMD.Float32x4.mul(r,a),i=SIMD.Float32x4.swizzle(i,1,0,3,2),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),s),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,i),c),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,i),s),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(n,i)),i=SIMD.Float32x4.mul(r,o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(n,i)),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,i),s),i=SIMD.Float32x4.swizzle(i,2,3,0,1),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,i),l),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(a,i)),i=SIMD.Float32x4.mul(r,n),i=SIMD.Float32x4.swizzle(i,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),l),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(a,i)),i=SIMD.Float32x4.swizzle(i,2,3,0,1),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(o,i)),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,i),c),f=SIMD.Float32x4.mul(r,u),f=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(f,2,3,0,1),f),f=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(f,1,0,3,2),f),i=SIMD.Float32x4.reciprocalApproximation(f),f=SIMD.Float32x4.sub(SIMD.Float32x4.add(i,i),SIMD.Float32x4.mul(f,SIMD.Float32x4.mul(i,i))),(f=SIMD.Float32x4.swizzle(f,0,0,0,0))?(SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(f,u)),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(f,l)),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(f,s)),SIMD.Float32x4.store(t,12,SIMD.Float32x4.mul(f,c)),t):null},n.invert=a.USE_SIMD?n.SIMD.invert:n.scalar.invert,n.scalar.adjoint=function(t,e){var r=e[0],a=e[1],n=e[2],o=e[3],i=e[4],u=e[5],l=e[6],s=e[7],c=e[8],f=e[9],h=e[10],M=e[11],d=e[12],m=e[13],x=e[14],v=e[15];return t[0]=u*(h*v-M*x)-f*(l*v-s*x)+m*(l*M-s*h),t[1]=-(a*(h*v-M*x)-f*(n*v-o*x)+m*(n*M-o*h)),t[2]=a*(l*v-s*x)-u*(n*v-o*x)+m*(n*s-o*l),t[3]=-(a*(l*M-s*h)-u*(n*M-o*h)+f*(n*s-o*l)),t[4]=-(i*(h*v-M*x)-c*(l*v-s*x)+d*(l*M-s*h)),t[5]=r*(h*v-M*x)-c*(n*v-o*x)+d*(n*M-o*h),t[6]=-(r*(l*v-s*x)-i*(n*v-o*x)+d*(n*s-o*l)),t[7]=r*(l*M-s*h)-i*(n*M-o*h)+c*(n*s-o*l),t[8]=i*(f*v-M*m)-c*(u*v-s*m)+d*(u*M-s*f),t[9]=-(r*(f*v-M*m)-c*(a*v-o*m)+d*(a*M-o*f)),t[10]=r*(u*v-s*m)-i*(a*v-o*m)+d*(a*s-o*u),t[11]=-(r*(u*M-s*f)-i*(a*M-o*f)+c*(a*s-o*u)),t[12]=-(i*(f*x-h*m)-c*(u*x-l*m)+d*(u*h-l*f)),t[13]=r*(f*x-h*m)-c*(a*x-n*m)+d*(a*h-n*f),t[14]=-(r*(u*x-l*m)-i*(a*x-n*m)+d*(a*l-n*u)),t[15]=r*(u*h-l*f)-i*(a*h-n*f)+c*(a*l-n*u),t},n.SIMD.adjoint=function(t,e){var r,a,n,o,i,u,l,s,c,f,h,M,d,r=SIMD.Float32x4.load(e,0),a=SIMD.Float32x4.load(e,4),n=SIMD.Float32x4.load(e,8),o=SIMD.Float32x4.load(e,12);return c=SIMD.Float32x4.shuffle(r,a,0,1,4,5),u=SIMD.Float32x4.shuffle(n,o,0,1,4,5),i=SIMD.Float32x4.shuffle(c,u,0,2,4,6),u=SIMD.Float32x4.shuffle(u,c,1,3,5,7),c=SIMD.Float32x4.shuffle(r,a,2,3,6,7),s=SIMD.Float32x4.shuffle(n,o,2,3,6,7),l=SIMD.Float32x4.shuffle(c,s,0,2,4,6),s=SIMD.Float32x4.shuffle(s,c,1,3,5,7),c=SIMD.Float32x4.mul(l,s),c=SIMD.Float32x4.swizzle(c,1,0,3,2),f=SIMD.Float32x4.mul(u,c),h=SIMD.Float32x4.mul(i,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,c),f),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),c=SIMD.Float32x4.mul(u,l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),f),d=SIMD.Float32x4.mul(i,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(s,c)),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),d),d=SIMD.Float32x4.swizzle(d,2,3,0,1),c=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,3,0,1),s),c=SIMD.Float32x4.swizzle(c,1,0,3,2),l=SIMD.Float32x4.swizzle(l,2,3,0,1),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),f),M=SIMD.Float32x4.mul(i,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(l,c)),M=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),M),M=SIMD.Float32x4.swizzle(M,2,3,0,1),c=SIMD.Float32x4.mul(i,u),c=SIMD.Float32x4.swizzle(c,1,0,3,2),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),M),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,c),d),c=SIMD.Float32x4.swizzle(c,2,3,0,1),M=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,c),M),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(l,c)),c=SIMD.Float32x4.mul(i,s),c=SIMD.Float32x4.swizzle(c,1,0,3,2),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(l,c)),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),M),c=SIMD.Float32x4.swizzle(c,2,3,0,1),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),h),M=SIMD.Float32x4.sub(M,SIMD.Float32x4.mul(u,c)),c=SIMD.Float32x4.mul(i,l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),h),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(u,c)),c=SIMD.Float32x4.swizzle(c,2,3,0,1),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(s,c)),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),d),SIMD.Float32x4.store(t,0,f),SIMD.Float32x4.store(t,4,h),SIMD.Float32x4.store(t,8,M),SIMD.Float32x4.store(t,12,d),t},n.adjoint=a.USE_SIMD?n.SIMD.adjoint:n.scalar.adjoint,n.determinant=function(t){var e=t[0],r=t[1],a=t[2],n=t[3],o=t[4],i=t[5],u=t[6],l=t[7],s=t[8],c=t[9],f=t[10],h=t[11],M=t[12],d=t[13],m=t[14],x=t[15],v=e*i-r*o,S=e*u-a*o,b=e*l-n*o,g=r*u-a*i,I=r*l-n*i,D=a*l-n*u,F=s*d-c*M,p=s*m-f*M,E=s*x-h*M,y=c*m-f*d,w=c*x-h*d,R=f*x-h*m;return v*R-S*w+b*y+g*E-I*p+D*F},n.SIMD.multiply=function(t,e,r){var a=SIMD.Float32x4.load(e,0),n=SIMD.Float32x4.load(e,4),o=SIMD.Float32x4.load(e,8),i=SIMD.Float32x4.load(e,12),u=SIMD.Float32x4.load(r,0),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,0,0,0,0),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,3,3,3,3),i))));SIMD.Float32x4.store(t,0,l);var s=SIMD.Float32x4.load(r,4),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,0,0,0,0),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,3,3,3,3),i))));SIMD.Float32x4.store(t,4,c);var f=SIMD.Float32x4.load(r,8),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,0,0,0,0),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,3,3,3,3),i))));SIMD.Float32x4.store(t,8,h);var M=SIMD.Float32x4.load(r,12),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(M,0,0,0,0),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(M,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(M,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(M,3,3,3,3),i))));return SIMD.Float32x4.store(t,12,d),t},n.scalar.multiply=function(t,e,r){var a=e[0],n=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=e[6],c=e[7],f=e[8],h=e[9],M=e[10],d=e[11],m=e[12],x=e[13],v=e[14],S=e[15],b=r[0],g=r[1],I=r[2],D=r[3];return t[0]=b*a+g*u+I*f+D*m,t[1]=b*n+g*l+I*h+D*x,t[2]=b*o+g*s+I*M+D*v,t[3]=b*i+g*c+I*d+D*S,b=r[4],g=r[5],I=r[6],D=r[7],t[4]=b*a+g*u+I*f+D*m,t[5]=b*n+g*l+I*h+D*x,t[6]=b*o+g*s+I*M+D*v,t[7]=b*i+g*c+I*d+D*S,b=r[8],g=r[9],I=r[10],D=r[11],t[8]=b*a+g*u+I*f+D*m,t[9]=b*n+g*l+I*h+D*x,t[10]=b*o+g*s+I*M+D*v,t[11]=b*i+g*c+I*d+D*S,b=r[12],g=r[13],I=r[14],D=r[15],t[12]=b*a+g*u+I*f+D*m,t[13]=b*n+g*l+I*h+D*x,t[14]=b*o+g*s+I*M+D*v,t[15]=b*i+g*c+I*d+D*S,t},n.multiply=a.USE_SIMD?n.SIMD.multiply:n.scalar.multiply,n.mul=n.multiply,n.scalar.translate=function(t,e,r){var a,n,o,i,u,l,s,c,f,h,M,d,m=r[0],x=r[1],v=r[2];return e===t?(t[12]=e[0]*m+e[4]*x+e[8]*v+e[12],t[13]=e[1]*m+e[5]*x+e[9]*v+e[13],t[14]=e[2]*m+e[6]*x+e[10]*v+e[14],t[15]=e[3]*m+e[7]*x+e[11]*v+e[15]):(a=e[0],n=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=e[6],c=e[7],f=e[8],h=e[9],M=e[10],d=e[11],t[0]=a,t[1]=n,t[2]=o,t[3]=i,t[4]=u,t[5]=l,t[6]=s,t[7]=c,t[8]=f,t[9]=h,t[10]=M,t[11]=d,t[12]=a*m+u*x+f*v+e[12],t[13]=n*m+l*x+h*v+e[13],t[14]=o*m+s*x+M*v+e[14],t[15]=i*m+c*x+d*v+e[15]),t},n.SIMD.translate=function(t,e,r){var a=SIMD.Float32x4.load(e,0),n=SIMD.Float32x4.load(e,4),o=SIMD.Float32x4.load(e,8),i=SIMD.Float32x4.load(e,12),u=SIMD.Float32x4(r[0],r[1],r[2],0);e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11]),a=SIMD.Float32x4.mul(a,SIMD.Float32x4.swizzle(u,0,0,0,0)),n=SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(u,1,1,1,1)),o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(u,2,2,2,2));var l=SIMD.Float32x4.add(a,SIMD.Float32x4.add(n,SIMD.Float32x4.add(o,i)));return SIMD.Float32x4.store(t,12,l),t},n.translate=a.USE_SIMD?n.SIMD.translate:n.scalar.translate,n.scalar.scale=function(t,e,r){var a=r[0],n=r[1],o=r[2];return t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t[3]=e[3]*a,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},n.SIMD.scale=function(t,e,r){var a,n,o,i=SIMD.Float32x4(r[0],r[1],r[2],0);return a=SIMD.Float32x4.load(e,0),SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(a,SIMD.Float32x4.swizzle(i,0,0,0,0))),n=SIMD.Float32x4.load(e,4),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(i,1,1,1,1))),o=SIMD.Float32x4.load(e,8),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(i,2,2,2,2))),t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},n.scale=a.USE_SIMD?n.SIMD.scale:n.scalar.scale,n.rotate=function(t,e,r,n){var o,i,u,l,s,c,f,h,M,d,m,x,v,S,b,g,I,D,F,p,E,y,w,R,A=n[0],T=n[1],_=n[2],P=Math.sqrt(A*A+T*T+_*_);return Math.abs(P)<a.EPSILON?null:(P=1/P,A*=P,T*=P,_*=P,o=Math.sin(r),i=Math.cos(r),u=1-i,l=e[0],s=e[1],c=e[2],f=e[3],h=e[4],M=e[5],d=e[6],m=e[7],x=e[8],v=e[9],S=e[10],b=e[11],g=A*A*u+i,I=T*A*u+_*o,D=_*A*u-T*o,F=A*T*u-_*o,p=T*T*u+i,E=_*T*u+A*o,y=A*_*u+T*o,w=T*_*u-A*o,R=_*_*u+i,t[0]=l*g+h*I+x*D,t[1]=s*g+M*I+v*D,t[2]=c*g+d*I+S*D,t[3]=f*g+m*I+b*D,t[4]=l*F+h*p+x*E,t[5]=s*F+M*p+v*E,t[6]=c*F+d*p+S*E,t[7]=f*F+m*p+b*E,t[8]=l*y+h*w+x*R,t[9]=s*y+M*w+v*R,t[10]=c*y+d*w+S*R,t[11]=f*y+m*w+b*R,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},n.scalar.rotateX=function(t,e,r){var a=Math.sin(r),n=Math.cos(r),o=e[4],i=e[5],u=e[6],l=e[7],s=e[8],c=e[9],f=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*n+s*a,t[5]=i*n+c*a,t[6]=u*n+f*a,t[7]=l*n+h*a,t[8]=s*n-o*a,t[9]=c*n-i*a,t[10]=f*n-u*a,t[11]=h*n-l*a,t},n.SIMD.rotateX=function(t,e,r){var a=SIMD.Float32x4.splat(Math.sin(r)),n=SIMD.Float32x4.splat(Math.cos(r));e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var o=SIMD.Float32x4.load(e,4),i=SIMD.Float32x4.load(e,8);return SIMD.Float32x4.store(t,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,n),SIMD.Float32x4.mul(i,a))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,n),SIMD.Float32x4.mul(o,a))),t},n.rotateX=a.USE_SIMD?n.SIMD.rotateX:n.scalar.rotateX,n.scalar.rotateY=function(t,e,r){var a=Math.sin(r),n=Math.cos(r),o=e[0],i=e[1],u=e[2],l=e[3],s=e[8],c=e[9],f=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*n-s*a,t[1]=i*n-c*a,t[2]=u*n-f*a,t[3]=l*n-h*a,t[8]=o*a+s*n,t[9]=i*a+c*n,t[10]=u*a+f*n,t[11]=l*a+h*n,t},n.SIMD.rotateY=function(t,e,r){var a=SIMD.Float32x4.splat(Math.sin(r)),n=SIMD.Float32x4.splat(Math.cos(r));e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var o=SIMD.Float32x4.load(e,0),i=SIMD.Float32x4.load(e,8);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,n),SIMD.Float32x4.mul(i,a))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,a),SIMD.Float32x4.mul(i,n))),t},n.rotateY=a.USE_SIMD?n.SIMD.rotateY:n.scalar.rotateY,n.scalar.rotateZ=function(t,e,r){var a=Math.sin(r),n=Math.cos(r),o=e[0],i=e[1],u=e[2],l=e[3],s=e[4],c=e[5],f=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*n+s*a,t[1]=i*n+c*a,t[2]=u*n+f*a,t[3]=l*n+h*a,t[4]=s*n-o*a,t[5]=c*n-i*a,t[6]=f*n-u*a,t[7]=h*n-l*a,t},n.SIMD.rotateZ=function(t,e,r){var a=SIMD.Float32x4.splat(Math.sin(r)),n=SIMD.Float32x4.splat(Math.cos(r));e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var o=SIMD.Float32x4.load(e,0),i=SIMD.Float32x4.load(e,4);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,n),SIMD.Float32x4.mul(i,a))),SIMD.Float32x4.store(t,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,n),SIMD.Float32x4.mul(o,a))),t},n.rotateZ=a.USE_SIMD?n.SIMD.rotateZ:n.scalar.rotateZ,n.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},n.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromRotation=function(t,e,r){var n,o,i,u=r[0],l=r[1],s=r[2],c=Math.sqrt(u*u+l*l+s*s);return Math.abs(c)<a.EPSILON?null:(c=1/c,u*=c,l*=c,s*=c,n=Math.sin(e),o=Math.cos(e),i=1-o,t[0]=u*u*i+o,t[1]=l*u*i+s*n,t[2]=s*u*i-l*n,t[3]=0,t[4]=u*l*i-s*n,t[5]=l*l*i+o,t[6]=s*l*i+u*n,t[7]=0,t[8]=u*s*i+l*n,t[9]=l*s*i-u*n,t[10]=s*s*i+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},n.fromXRotation=function(t,e){var r=Math.sin(e),a=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromYRotation=function(t,e){var r=Math.sin(e),a=Math.cos(e);return t[0]=a,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromZRotation=function(t,e){var r=Math.sin(e),a=Math.cos(e);return t[0]=a,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromRotationTranslation=function(t,e,r){var a=e[0],n=e[1],o=e[2],i=e[3],u=a+a,l=n+n,s=o+o,c=a*u,f=a*l,h=a*s,M=n*l,d=n*s,m=o*s,x=i*u,v=i*l,S=i*s;return t[0]=1-(M+m),t[1]=f+S,t[2]=h-v,t[3]=0,t[4]=f-S,t[5]=1-(c+m),t[6]=d+x,t[7]=0,t[8]=h+v,t[9]=d-x,t[10]=1-(c+M),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},n.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},n.getRotation=function(t,e){var r=e[0]+e[5]+e[10],a=0;return r>0?(a=2*Math.sqrt(r+1),t[3]=.25*a,t[0]=(e[6]-e[9])/a,t[1]=(e[8]-e[2])/a,t[2]=(e[1]-e[4])/a):e[0]>e[5]&e[0]>e[10]?(a=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/a,t[0]=.25*a,t[1]=(e[1]+e[4])/a,t[2]=(e[8]+e[2])/a):e[5]>e[10]?(a=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/a,t[0]=(e[1]+e[4])/a,t[1]=.25*a,t[2]=(e[6]+e[9])/a):(a=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/a,t[0]=(e[8]+e[2])/a,t[1]=(e[6]+e[9])/a,t[2]=.25*a),t},n.fromRotationTranslationScale=function(t,e,r,a){var n=e[0],o=e[1],i=e[2],u=e[3],l=n+n,s=o+o,c=i+i,f=n*l,h=n*s,M=n*c,d=o*s,m=o*c,x=i*c,v=u*l,S=u*s,b=u*c,g=a[0],I=a[1],D=a[2];return t[0]=(1-(d+x))*g,t[1]=(h+b)*g,t[2]=(M-S)*g,t[3]=0,t[4]=(h-b)*I,t[5]=(1-(f+x))*I,t[6]=(m+v)*I,t[7]=0,t[8]=(M+S)*D,t[9]=(m-v)*D,t[10]=(1-(f+d))*D,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},n.fromRotationTranslationScaleOrigin=function(t,e,r,a,n){var o=e[0],i=e[1],u=e[2],l=e[3],s=o+o,c=i+i,f=u+u,h=o*s,M=o*c,d=o*f,m=i*c,x=i*f,v=u*f,S=l*s,b=l*c,g=l*f,I=a[0],D=a[1],F=a[2],p=n[0],E=n[1],y=n[2];return t[0]=(1-(m+v))*I,t[1]=(M+g)*I,t[2]=(d-b)*I,t[3]=0,t[4]=(M-g)*D,t[5]=(1-(h+v))*D,t[6]=(x+S)*D,t[7]=0,t[8]=(d+b)*F,t[9]=(x-S)*F,t[10]=(1-(h+m))*F,t[11]=0,t[12]=r[0]+p-(t[0]*p+t[4]*E+t[8]*y),t[13]=r[1]+E-(t[1]*p+t[5]*E+t[9]*y),t[14]=r[2]+y-(t[2]*p+t[6]*E+t[10]*y),t[15]=1,t},n.fromQuat=function(t,e){var r=e[0],a=e[1],n=e[2],o=e[3],i=r+r,u=a+a,l=n+n,s=r*i,c=a*i,f=a*u,h=n*i,M=n*u,d=n*l,m=o*i,x=o*u,v=o*l;return t[0]=1-f-d,t[1]=c+v,t[2]=h-x,t[3]=0,t[4]=c-v,t[5]=1-s-d,t[6]=M+m,t[7]=0,t[8]=h+x,t[9]=M-m,t[10]=1-s-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.frustum=function(t,e,r,a,n,o,i){var u=1/(r-e),l=1/(n-a),s=1/(o-i);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*l,t[6]=0,t[7]=0,t[8]=(r+e)*u,t[9]=(n+a)*l,t[10]=(i+o)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*o*2*s,t[15]=0,t},n.perspective=function(t,e,r,a,n){var o=1/Math.tan(e/2),i=1/(a-n);return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(n+a)*i,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*n*a*i,t[15]=0,t},n.perspectiveFromFieldOfView=function(t,e,r,a){var n=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),i=Math.tan(e.leftDegrees*Math.PI/180),u=Math.tan(e.rightDegrees*Math.PI/180),l=2/(i+u),s=2/(n+o);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=-((i-u)*l*.5),t[9]=(n-o)*s*.5,t[10]=a/(r-a),t[11]=-1,t[12]=0,t[13]=0,t[14]=a*r/(r-a),t[15]=0,t},n.ortho=function(t,e,r,a,n,o,i){var u=1/(e-r),l=1/(a-n),s=1/(o-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*s,t[11]=0,t[12]=(e+r)*u,t[13]=(n+a)*l,t[14]=(i+o)*s,t[15]=1,t},n.lookAt=function(t,e,r,o){var i,u,l,s,c,f,h,M,d,m,x=e[0],v=e[1],S=e[2],b=o[0],g=o[1],I=o[2],D=r[0],F=r[1],p=r[2];return Math.abs(x-D)<a.EPSILON&&Math.abs(v-F)<a.EPSILON&&Math.abs(S-p)<a.EPSILON?n.identity(t):(h=x-D,M=v-F,d=S-p,m=1/Math.sqrt(h*h+M*M+d*d),h*=m,M*=m,d*=m,i=g*d-I*M,u=I*h-b*d,l=b*M-g*h,m=Math.sqrt(i*i+u*u+l*l),m?(m=1/m,i*=m,u*=m,l*=m):(i=0,u=0,l=0),s=M*l-d*u,c=d*i-h*l,f=h*u-M*i,m=Math.sqrt(s*s+c*c+f*f),m?(m=1/m,s*=m,c*=m,f*=m):(s=0,c=0,f=0),t[0]=i,t[1]=s,t[2]=h,t[3]=0,t[4]=u,t[5]=c,t[6]=M,t[7]=0,t[8]=l,t[9]=f,t[10]=d,t[11]=0,t[12]=-(i*x+u*v+l*S),t[13]=-(s*x+c*v+f*S),t[14]=-(h*x+M*v+d*S),t[15]=1,t)},n.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},n.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t},n.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t},n.sub=n.subtract,n.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t},n.multiplyScalarAndAdd=function(t,e,r,a){return t[0]=e[0]+r[0]*a,t[1]=e[1]+r[1]*a,t[2]=e[2]+r[2]*a,t[3]=e[3]+r[3]*a,t[4]=e[4]+r[4]*a,t[5]=e[5]+r[5]*a,t[6]=e[6]+r[6]*a,t[7]=e[7]+r[7]*a,t[8]=e[8]+r[8]*a,t[9]=e[9]+r[9]*a,t[10]=e[10]+r[10]*a,t[11]=e[11]+r[11]*a,t[12]=e[12]+r[12]*a,t[13]=e[13]+r[13]*a,t[14]=e[14]+r[14]*a,t[15]=e[15]+r[15]*a,t},n.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},n.equals=function(t,e){var r=t[0],n=t[1],o=t[2],i=t[3],u=t[4],l=t[5],s=t[6],c=t[7],f=t[8],h=t[9],M=t[10],d=t[11],m=t[12],x=t[13],v=t[14],S=t[15],b=e[0],g=e[1],I=e[2],D=e[3],F=e[4],p=e[5],E=e[6],y=e[7],w=e[8],R=e[9],A=e[10],T=e[11],_=e[12],P=e[13],O=e[14],L=e[15];return Math.abs(r-b)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(n-g)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(o-I)<=a.EPSILON*Math.max(1,Math.abs(o),Math.abs(I))&&Math.abs(i-D)<=a.EPSILON*Math.max(1,Math.abs(i),Math.abs(D))&&Math.abs(u-F)<=a.EPSILON*Math.max(1,Math.abs(u),Math.abs(F))&&Math.abs(l-p)<=a.EPSILON*Math.max(1,Math.abs(l),Math.abs(p))&&Math.abs(s-E)<=a.EPSILON*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(c-y)<=a.EPSILON*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(f-w)<=a.EPSILON*Math.max(1,Math.abs(f),Math.abs(w))&&Math.abs(h-R)<=a.EPSILON*Math.max(1,Math.abs(h),Math.abs(R))&&Math.abs(M-A)<=a.EPSILON*Math.max(1,Math.abs(M),Math.abs(A))&&Math.abs(d-T)<=a.EPSILON*Math.max(1,Math.abs(d),Math.abs(T))&&Math.abs(m-_)<=a.EPSILON*Math.max(1,Math.abs(m),Math.abs(_))&&Math.abs(x-P)<=a.EPSILON*Math.max(1,Math.abs(x),Math.abs(P))&&Math.abs(v-O)<=a.EPSILON*Math.max(1,Math.abs(v),Math.abs(O))&&Math.abs(S-L)<=a.EPSILON*Math.max(1,Math.abs(S),Math.abs(L))},t.exports=n},function(t,e,r){var a=r(1),n=r(4),o=r(5),i=r(6),u={};u.create=function(){var t=new a.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},u.rotationTo=function(){var t=o.create(),e=o.fromValues(1,0,0),r=o.fromValues(0,1,0);return function(a,n,i){var l=o.dot(n,i);return l<-.999999?(o.cross(t,e,n),o.length(t)<1e-6&&o.cross(t,r,n),o.normalize(t,t),u.setAxisAngle(a,t,Math.PI),a):l>.999999?(a[0]=0,a[1]=0,a[2]=0,a[3]=1,a):(o.cross(t,n,i),a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=1+l,u.normalize(a,a))}}(),u.setAxes=function(){var t=n.create();return function(e,r,a,n){return t[0]=a[0],t[3]=a[1],t[6]=a[2],t[1]=n[0],t[4]=n[1],t[7]=n[2],t[2]=-r[0],t[5]=-r[1],t[8]=-r[2],u.normalize(e,u.fromMat3(e,t))}}(),u.clone=i.clone,u.fromValues=i.fromValues,u.copy=i.copy,u.set=i.set,u.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},u.setAxisAngle=function(t,e,r){r=.5*r;var a=Math.sin(r);return t[0]=a*e[0],t[1]=a*e[1],t[2]=a*e[2],t[3]=Math.cos(r),t},u.getAxisAngle=function(t,e){var r=2*Math.acos(e[3]),a=Math.sin(r/2);return 0!=a?(t[0]=e[0]/a,t[1]=e[1]/a,t[2]=e[2]/a):(t[0]=1,t[1]=0,t[2]=0),r},u.add=i.add,u.multiply=function(t,e,r){var a=e[0],n=e[1],o=e[2],i=e[3],u=r[0],l=r[1],s=r[2],c=r[3];return t[0]=a*c+i*u+n*s-o*l,t[1]=n*c+i*l+o*u-a*s,t[2]=o*c+i*s+a*l-n*u,t[3]=i*c-a*u-n*l-o*s,t},u.mul=u.multiply,u.scale=i.scale,u.rotateX=function(t,e,r){r*=.5;var a=e[0],n=e[1],o=e[2],i=e[3],u=Math.sin(r),l=Math.cos(r);return t[0]=a*l+i*u,t[1]=n*l+o*u,t[2]=o*l-n*u,t[3]=i*l-a*u,t},u.rotateY=function(t,e,r){r*=.5;var a=e[0],n=e[1],o=e[2],i=e[3],u=Math.sin(r),l=Math.cos(r);return t[0]=a*l-o*u,t[1]=n*l+i*u,t[2]=o*l+a*u,t[3]=i*l-n*u,t},u.rotateZ=function(t,e,r){r*=.5;var a=e[0],n=e[1],o=e[2],i=e[3],u=Math.sin(r),l=Math.cos(r);return t[0]=a*l+n*u,t[1]=n*l-a*u,t[2]=o*l+i*u,t[3]=i*l-o*u,t},u.calculateW=function(t,e){var r=e[0],a=e[1],n=e[2];return t[0]=r,t[1]=a,t[2]=n,t[3]=Math.sqrt(Math.abs(1-r*r-a*a-n*n)),t},u.dot=i.dot,u.lerp=i.lerp,u.slerp=function(t,e,r,a){var n,o,i,u,l,s=e[0],c=e[1],f=e[2],h=e[3],M=r[0],d=r[1],m=r[2],x=r[3];return o=s*M+c*d+f*m+h*x,o<0&&(o=-o,M=-M,d=-d,m=-m,x=-x),1-o>1e-6?(n=Math.acos(o),i=Math.sin(n),u=Math.sin((1-a)*n)/i,l=Math.sin(a*n)/i):(u=1-a,l=a),t[0]=u*s+l*M,t[1]=u*c+l*d,t[2]=u*f+l*m,t[3]=u*h+l*x,t},u.sqlerp=function(){var t=u.create(),e=u.create();return function(r,a,n,o,i,l){return u.slerp(t,a,i,l),u.slerp(e,n,o,l),u.slerp(r,t,e,2*l*(1-l)),r}}(),u.invert=function(t,e){var r=e[0],a=e[1],n=e[2],o=e[3],i=r*r+a*a+n*n+o*o,u=i?1/i:0;return t[0]=-r*u,t[1]=-a*u,t[2]=-n*u,t[3]=o*u,t},u.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},u.length=i.length,u.len=u.length,u.squaredLength=i.squaredLength,u.sqrLen=u.squaredLength,u.normalize=i.normalize,u.fromMat3=function(t,e){var r,a=e[0]+e[4]+e[8];if(a>0)r=Math.sqrt(a+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var n=0;e[4]>e[0]&&(n=1),e[8]>e[3*n+n]&&(n=2);var o=(n+1)%3,i=(n+2)%3;r=Math.sqrt(e[3*n+n]-e[3*o+o]-e[3*i+i]+1),t[n]=.5*r,r=.5/r,t[3]=(e[3*o+i]-e[3*i+o])*r,t[o]=(e[3*o+n]+e[3*n+o])*r,t[i]=(e[3*i+n]+e[3*n+i])*r}return t},u.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},u.exactEquals=i.exactEquals,u.equals=i.equals,t.exports=u},function(t,e,r){var a=r(1),n={};n.create=function(){var t=new a.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},n.clone=function(t){var e=new a.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},n.fromValues=function(t,e){var r=new a.ARRAY_TYPE(2);return r[0]=t,r[1]=e,r},n.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},n.set=function(t,e,r){return t[0]=e,t[1]=r,t},n.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t},n.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t},n.sub=n.subtract,n.multiply=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t},n.mul=n.multiply,n.divide=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t},n.div=n.divide,n.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},n.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},n.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t},n.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t},n.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},n.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t},n.scaleAndAdd=function(t,e,r,a){return t[0]=e[0]+r[0]*a,t[1]=e[1]+r[1]*a,t},n.distance=function(t,e){var r=e[0]-t[0],a=e[1]-t[1];return Math.sqrt(r*r+a*a)},n.dist=n.distance,n.squaredDistance=function(t,e){var r=e[0]-t[0],a=e[1]-t[1];return r*r+a*a},n.sqrDist=n.squaredDistance,n.length=function(t){var e=t[0],r=t[1];return Math.sqrt(e*e+r*r)},n.len=n.length,n.squaredLength=function(t){var e=t[0],r=t[1];return e*e+r*r},n.sqrLen=n.squaredLength,n.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},n.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},n.normalize=function(t,e){var r=e[0],a=e[1],n=r*r+a*a;return n>0&&(n=1/Math.sqrt(n),t[0]=e[0]*n,t[1]=e[1]*n),t},n.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},n.cross=function(t,e,r){var a=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=a,t},n.lerp=function(t,e,r,a){var n=e[0],o=e[1];return t[0]=n+a*(r[0]-n),t[1]=o+a*(r[1]-o),t},n.random=function(t,e){e=e||1;var r=2*a.RANDOM()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t},n.transformMat2=function(t,e,r){var a=e[0],n=e[1];return t[0]=r[0]*a+r[2]*n,t[1]=r[1]*a+r[3]*n,t},n.transformMat2d=function(t,e,r){var a=e[0],n=e[1];return t[0]=r[0]*a+r[2]*n+r[4],t[1]=r[1]*a+r[3]*n+r[5],t},n.transformMat3=function(t,e,r){var a=e[0],n=e[1];return t[0]=r[0]*a+r[3]*n+r[6],t[1]=r[1]*a+r[4]*n+r[7],t},n.transformMat4=function(t,e,r){var a=e[0],n=e[1];return t[0]=r[0]*a+r[4]*n+r[12],t[1]=r[1]*a+r[5]*n+r[13],t},n.forEach=function(){var t=n.create();return function(e,r,a,n,o,i){var u,l;for(r||(r=2),a||(a=0),l=n?Math.min(n*r+a,e.length):e.length,u=a;u<l;u+=r)t[0]=e[u],t[1]=e[u+1],o(t,t,i),e[u]=t[0],e[u+1]=t[1];return e}}(),n.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},n.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},n.equals=function(t,e){var r=t[0],n=t[1],o=e[0],i=e[1];return Math.abs(r-o)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-i)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))},t.exports=n},function(t,e,r){(function(t){console.log("in app.js");var e=(t.env.WEBPACK_ENV,r(3));for(var a in e)console.log(a+":"+e[a]);console.warn("in release mode"),window.vrmini=e,console.log("Window.vrmini:"+e)}).call(e,r(7))}]);